{% extends 'kanisa/management/base.html' %}

{% load url from future %}

{% block content %}
{% if events_to_schedule %}
<p><a href="{% url 'kanisa_manage_diary_schedule_weeks_regular_event' %}" class="btn btn-large btn-primary">Schedule this week's regular events &raquo;</a></p>
{% endif %}

<hr />

<h2>This Week</h2>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Day</th>
      <th colspan="3">Available Events</th>
      <th colspan="3">Scheduled Events</th>
    </tr>
  </thead>
  <tbody>
    {% for entry in calendar %}
    <tr>
      <td><strong>{{ entry.dayname }}</strong></td>
      <td>
      {% for e in entry.regular_events %}
      {{ e.start_time }}<br />
      {% empty %}
      <em>None</em>
      {% endfor %}
      </td>
      <td>
      {% for e in entry.regular_events %}
      <a href="{% url 'kanisa_manage_diary_regular_update' e.pk %}">{{ e }}</a><br />
      {% endfor %}
      </td>
      <td>
      {% for e in entry.regular_events %}
        <a href="{% url 'kanisa_manage_diary_schedule_regular_event' e.pk entry.date|date:"Ymd" %}" class="btn btn-mini btn-success">Schedule</a>
      <br />
      {% endfor %}
      </td>
      <td>
      {% for e in entry.scheduled_events %}
      {{ e.start_time }}<br />
      {% endfor %}
      </td>
      <td>
      {% for e in entry.scheduled_events %}
      <a href="{% url 'kanisa_manage_diary_scheduled_update' e.pk %}">{{ e }}</a><br />
      {% endfor %}
      </td>
      <td>
      {% for e in entry.scheduled_events %}
        <a href="{% url 'kanisa_manage_diary_cancel_regular_event' e.pk %}" class="btn btn-mini btn-danger">Cancel</a>
      <br />
      {% endfor %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<p class="pull-right"><a href="{% url 'kanisa_manage_diary_scheduled_create' %}" class="btn btn-primary">Schedule a new event &raquo;</a></p>

{% endblock %}

{% extends 'kanisa/base.html' %}

{% load markup %}
{% load thumbnail %}

{% block content %}
<h1>
  {{ object.title }}
  {% with object.date_range as date_range %}
  {% if object.date_range or object.passage %}
  <span class="subtitle">
    {% include "kanisa/public/sermons/_subtitle.html" %}
  </span>
  {% endif %}
  {% endwith %}
</h1>

<div class="row">
  <div class="span7">
    <div class="lead">
      <div class="thumbnail" style="width:260px; float: left; margin: 0 1em 1em 0">
        {% thumbnail sermonseries.image "260x180" crop="center" as im %}
        <img src="{{ im.url }}" width="{{ im.width }}px" height="{{ im.height }}px" />
        {% endthumbnail %}
      </div>
      {% if object.intro %}
      {{ object.intro|markdown }}
      {% endif %}
    </div>
    {% if object.details %}
    {{ object.details|markdown }}
    {% endif %}
  </div>
  <div class="span5">
    {% with object.sermons as sermons %}
    {% if sermons %}
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Sermon</th>
          <th>Passage</th>
        </tr>
      </thead>
      <tbody>
        {% for sermon in sermons %}
        <tr>
          <td>
            {{ sermon.title }}
            <span class="extra_details">&ndash; {{ sermon.date|date:"jS F Y"}}</span>
          </td>
          <td>
            {{ sermon.passage }}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p class="alert alert-info">There are no sermons in this series yet.</p>
    {% endif %}
    {% endwith %}
  </div>
</div>
{% endblock %}
